<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Bingo</title>
  <style>
    body{text-align:center;font-family:Arial}
    #board{display:grid;grid-template-columns:repeat(5,80px);gap:5px;margin:20px auto;}
    .cell{border:2px solid #000;width:80px;height:80px;display:flex;align-items:center;justify-content:center;font-size:20px;cursor:pointer;}
    .header{background:#222;color:white;font-weight:bold;cursor:default;}
    .marked{background:#4caf50;color:white;}
    .bingo{background:gold !important;color:black;}
  </style>
</head>
<body>
<h1>Stanislas' bingo</h1>
<h1>B I N G O</h1>
<div id="board"></div>
<div id="status">Waiting for game server...</div>
<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
<script>
const socket = io("https://server.ctksystem.com")
const boardEl = document.getElementById("board")
const statusEl = document.getElementById("status")
let board=[], marks=[]

const headers=["B","I","N","G","O"]
headers.forEach(h=>{
  const div=document.createElement("div")
  div.className="cell header"
  div.textContent=h
  boardEl.appendChild(div)
})

socket.on("board", b=>{
  board=b
  marks=[]
  board.slice(0,25).forEach((val,i)=>{
    const d=document.createElement("div")
    d.className="cell"
    d.textContent=val
    if(val==="FREE"){ d.classList.add("marked"); marks.push(i) }
    d.onclick=()=>{socket.emit("mark",i)}
    boardEl.appendChild(d)
  })
})

socket.on("number_called", n=>{
  statusEl.textContent="Number called: "+n
})

socket.on("bingo", name=>{
  alert("BINGO: "+name)
})

socket.on("game_started", ()=>{ statusEl.textContent="Game started" })
socket.on("game_ended", ()=>{ statusEl.textContent="Game ended" })
</script>
</body>
</html>
